<div class="relative flex flex-col items-center justify-between flex-1 bg-gray-8 ">
  <div class="flex flex-col items-center bg-cover bg-bottom bg-no-repeat max-h-[430px] w-full pt-6 px-5 pb-12" style="background-image: url(<%= asset_path 'background_design.svg' %>)">
    <div class="z-10 flex flex-col items-start max-w-screen-sm">
      <div class="flex flex-row items-center">
        <% if @profile.image.attached? %>
          <div class="flex flex-col items-center justify-center relative w-[120px] h-[120px] rounded-full">
            <%= image_tag url_for(@profile.image), class: "rounded-full absolute" %>
          </div>
        <% else %>
          <div class="w-[120px] h-[120px] rounded-full bg-slate-300 p-5 flex flex-row items-center justify-center">
            <%= image_tag url_for("user_avatar.svg") %>
          </div>
        <% end %>
        <div class="flex flex-col items-start ml-5">
          <div class="text-xl italic font-black text-red"> <%= @profile.name.presence || "Anonymous" %> </div>
          <% if @profile.job_title.present? %>
            <div class="text-lg"><%= @profile.job_title %></div>
          <% end %>
        </div>
      </div>
      <% if @profile.bio.present? %>
        <p class="mt-6 text-base font-medium"><%= @profile.bio %></p>
      <% end %>
      <div class="flex flex-row items-center justify-center w-full gap-4">
        <%= link_to(
          @profile.github_url,
          class: [
            "flex flex-row grow items-center justify-center w-28 h-14 rounded-lg mt-6",
            "bg-red": @profile.github_url.present?,
            "bg-gray-6 cursor-not-allowed": @profile.github_url.blank?
          ]
        ) do %>
          <img src="<%= asset_path 'github.svg' %>" alt="github" class="w-6 h-6">
        <% end %>
        <%= link_to(
          @profile.twitter_url,
          class: [
            "flex flex-row grow items-center justify-center w-28 h-14 rounded-lg mt-6",
            "bg-red": @profile.twitter_url.present?,
            "bg-gray-6 cursor-not-allowed": @profile.twitter_url.blank?
          ]
        ) do %>
          <img src="<%= asset_path 'twitter.svg' %>" alt="twitter" class="w-6 h-6">
        <% end %>
        <%= link_to(
          @profile.linkedin_url,
          class: [
            "flex flex-row grow items-center justify-center w-28 h-14 rounded-lg mt-6",
            "bg-red": @profile.linkedin_url.present?,
            "bg-gray-6 cursor-not-allowed": @profile.linkedin_url.blank?
          ]
        ) do %>
          <img src="<%= asset_path 'linkedin.svg' %>" alt="linkedin" class="w-6 h-6">
        <% end %>
      </div>
    </div>
  </div>
  <%= render inline: @profile.svg_qr_code(module_size: 4) %>

  <% if allowed_to?(:edit?, @profile, with: ProfilePolicy) %>
    <div class="flex flex-col items-center w-full gap-4 p-4">
      <%= link_to 'Edit Profile', edit_profile_path(@profile.uuid), class: "text-red font-bold rounded-sm underline italic text-lg" %>
    </div>

    <%= button_to(
      "Log out", user_session_path, method: :delete,
      form_class: "w-full max-w-screen-sm px-4",
      class: "w-full bg-red py-4 text-white font-black italic rounded-[10px] uppercase mb-6"
    ) %>
  <% end %>
</div>
